(()=>{class e{constructor(e,t,s){this.name=e,this.color=t,this.favorite=s,this.tasks=[]}changeName(e){this.name=e}changeColor(e){this.color=e}changeFavorite(e){this.favorite=e}addTask(e){this.tasks.push(e)}removeTask(e){const t=this.tasks.filter((t=>t.id!==e.id));this.tasks.length=0,this.tasks.push(...t)}}class t{constructor(e,t,s,o,r){this.title=e,this.description=t,this.dueDate=s,this.priority=o,this.notes=[],this.projectId=r}changeTitle(e){this.title=e}changeDescription(e){this.description=e}changeDueDate(e){this.dueDate=e}changePriority(e){this.priority=e}changeProjectId(e){this.projectId=e}addNote(e){this.notes.push(e)}removeNote(e){const t=this.notes.filter((t=>t.id!==e.id));this.notes.length=0,this.notes.push(...t)}}class s{constructor(e,t,s){this.note=e,this.taskId=t,this.projectId=s}updateNote(e){this.note=e}}const o=(()=>{let e=[];const t=()=>{localStorage.setItem("usedIDs",JSON.stringify(e))};return{generateId:()=>{let s="";function o(){for(let e=0;e<8;e++){const e=Math.floor(72*Math.random());s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()".charAt(e)}}return o(),e.includes(s)&&(s="",o()),e.push(s),t(),s},removeId:s=>{const o=e.indexOf(s);e.splice(o,1),t()},usedIDs:e}})(),r=(()=>{let t=[];const s=()=>{localStorage.setItem("projects",JSON.stringify(t))};return{projects:t,createProject:(r,a,i)=>{const c=new e(r,a,i);c.id=o.generateId(),t.push(c),s()},deleteProject:e=>{const r=t.indexOf(t.find((t=>t.id===e)));t.splice(r,1),a.clearTasksFromDeletedProject(e),i.clearNotesFromDeletedProject(e),o.removeId(e),s()},placeTask:e=>{t.find((t=>t.id===e.projectId)).addTask(e),s()},removeTask:e=>{t.find((t=>t.id===e.projectId)).removeTask(e),s()},transferTask:(e,o)=>{const r=t.find((t=>t.id===e.projectId)),a=r.tasks.indexOf(e);r.tasks.splice(a,1),t.find((e=>e.id===o)).tasks.push(e),s()},updateProjectStorage:s}})(),a=(()=>{let e=[];const s=()=>{localStorage.setItem("tasks",JSON.stringify(e))};return{tasks:e,createTask:(a,i,c,d,n)=>{const l=new t(a,i,c,d,n);l.id=o.generateId(),e.push(l),r.placeTask(l),s()},deleteTask:t=>{const a=e.find((e=>e.id===t));r.removeTask(a);const c=e.indexOf(e.find((e=>e.id===t)));e.splice(c,1),i.clearNotesFromDeletedTask(t),o.removeId(t),s()},clearTasksFromDeletedProject:t=>{e.filter((e=>e.projectId===t)).map((e=>e.id)).forEach((e=>o.removeId(e)));const r=e.filter((e=>e.projectId!==t));e.length=0,e.push(...r),s()},placeNote:t=>{e.find((e=>e.id===t.taskId)).addNote(t),s()},removeNote:t=>{e.find((e=>e.id===t.taskId)).removeNote(t),s()},transferToOtherProject:(t,o)=>{const a=e.find((e=>e.id===t));r.transferTask(a,o),a.changeProjectId(o),s()},updateTaskStorage:s}})(),i=(()=>{let e=[];const t=()=>{localStorage.setItem("notes",JSON.stringify(e))};return{notes:e,createNote:(r,i,c)=>{const d=new s(r,i,c);d.id=o.generateId(),e.push(d),t(),a.placeNote(d)},deleteNote:s=>{const r=e.find((e=>e.id===s));a.removeNote(r);const i=e.indexOf(e.find((e=>e.id===s)));e.splice(i,1),o.removeId(s),t()},clearNotesFromDeletedTask:s=>{e.filter((e=>e.taskId===s)).map((e=>e.id)).forEach((e=>o.removeId(e)));const r=e.filter((e=>e.taskId!==s));e.length=0,e.push(...r),t()},clearNotesFromDeletedProject:s=>{e.filter((e=>e.projectId===s)).map((e=>e.id)).forEach((e=>o.removeId(e)));const r=e.filter((e=>e.projectId!==s));e.length=0,e.push(...r),t()},updateNoteStorage:t}})();r.createProject("Parkour","red",!0),r.createProject("Drumming","white",!1),a.createTask("Kong Vault","monkey style","date Magellan died","least Prio",r.projects[0].id),a.createTask("Drum Fill Lesson","just the basics","january 1, 1947","no prio",r.projects[1].id),i.createNote("warmup",a.tasks[0].id,r.projects[0].id),i.createNote("dive and raise hips",a.tasks[0].id,r.projects[0].id),i.createNote("drumeo vid 1",a.tasks[1].id,r.projects[1].id),console.log(r.projects),console.log(a.tasks),console.log(i.notes),console.log(o.usedIDs),localStorage.setItem("projects",JSON.stringify(r.projects)),localStorage.setItem("tasks",JSON.stringify(a.tasks)),localStorage.setItem("notes",JSON.stringify(i.notes))})();